<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>总体介绍 | Ligg.EasyWinApp</title>
    <meta name="description" content="无码化Windows应用编程快捷框架">
    <link rel="icon" href="/docs/favicon.ico">
    
    <link rel="preload" href="/docs/assets/css/0.styles.f9459e20.css" as="style"><link rel="preload" href="/docs/assets/js/app.b9721d5c.js" as="script"><link rel="preload" href="/docs/assets/js/36.b32497a7.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.07e666e4.js"><link rel="prefetch" href="/docs/assets/js/11.f3128b00.js"><link rel="prefetch" href="/docs/assets/js/12.fc65d26f.js"><link rel="prefetch" href="/docs/assets/js/13.9d756d42.js"><link rel="prefetch" href="/docs/assets/js/14.128ad430.js"><link rel="prefetch" href="/docs/assets/js/15.658cf65a.js"><link rel="prefetch" href="/docs/assets/js/16.e6a607b4.js"><link rel="prefetch" href="/docs/assets/js/17.4ffb48a7.js"><link rel="prefetch" href="/docs/assets/js/18.9db4c84e.js"><link rel="prefetch" href="/docs/assets/js/19.9e8afcfd.js"><link rel="prefetch" href="/docs/assets/js/20.10371e95.js"><link rel="prefetch" href="/docs/assets/js/21.44e7f8b2.js"><link rel="prefetch" href="/docs/assets/js/22.03cffba4.js"><link rel="prefetch" href="/docs/assets/js/23.5412acf2.js"><link rel="prefetch" href="/docs/assets/js/24.dc1bd235.js"><link rel="prefetch" href="/docs/assets/js/25.ac4fad94.js"><link rel="prefetch" href="/docs/assets/js/26.05a9db85.js"><link rel="prefetch" href="/docs/assets/js/27.c8fb10dd.js"><link rel="prefetch" href="/docs/assets/js/28.9b8ebdf5.js"><link rel="prefetch" href="/docs/assets/js/29.4185522d.js"><link rel="prefetch" href="/docs/assets/js/3.57b04dd6.js"><link rel="prefetch" href="/docs/assets/js/30.0e27bcf9.js"><link rel="prefetch" href="/docs/assets/js/31.1737ce0a.js"><link rel="prefetch" href="/docs/assets/js/32.8d050b64.js"><link rel="prefetch" href="/docs/assets/js/33.080ce793.js"><link rel="prefetch" href="/docs/assets/js/34.e7ef4766.js"><link rel="prefetch" href="/docs/assets/js/35.0dac5b1c.js"><link rel="prefetch" href="/docs/assets/js/37.7432242a.js"><link rel="prefetch" href="/docs/assets/js/38.b5bbc3a4.js"><link rel="prefetch" href="/docs/assets/js/39.eeb59723.js"><link rel="prefetch" href="/docs/assets/js/4.aedf4b72.js"><link rel="prefetch" href="/docs/assets/js/40.51fa5b10.js"><link rel="prefetch" href="/docs/assets/js/41.ee3b7a42.js"><link rel="prefetch" href="/docs/assets/js/42.6b871aa6.js"><link rel="prefetch" href="/docs/assets/js/43.08ce8bd4.js"><link rel="prefetch" href="/docs/assets/js/44.c49e0dd7.js"><link rel="prefetch" href="/docs/assets/js/45.f5bc0bf0.js"><link rel="prefetch" href="/docs/assets/js/46.9b911a42.js"><link rel="prefetch" href="/docs/assets/js/47.30fa2cbb.js"><link rel="prefetch" href="/docs/assets/js/48.2bfc0705.js"><link rel="prefetch" href="/docs/assets/js/5.b561533f.js"><link rel="prefetch" href="/docs/assets/js/6.81906c67.js"><link rel="prefetch" href="/docs/assets/js/7.f1b0818e.js"><link rel="prefetch" href="/docs/assets/js/8.ca7acb55.js"><link rel="prefetch" href="/docs/assets/js/9.d23ba62f.js"><link rel="prefetch" href="/docs/assets/js/vendors~docsearch.e6e0ecc3.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.f9459e20.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container getting-started"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Ligg.EasyWinApp</span></a> <div class="links" style="max-width:nullpx;"><form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">首页</a></div><div class="nav-item"><a href="/docs/guide/" aria-current="page" class="nav-link router-link-exact-active router-link-active">指南</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">示例</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>示例文档</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/examples/ittk.html" class="nav-link">IT工具箱</a></li><li class="dropdown-subitem"><a href="/docs/examples/devtk.html" class="nav-link">开发工具箱</a></li><li class="dropdown-subitem"><a href="/docs/examples/orptk.html" class="nav-link">运维工具箱</a></li><li class="dropdown-subitem"><a href="/docs/examples/ewc.html" class="nav-link">快捷Web客户端</a></li><li class="dropdown-subitem"><a href="/docs/examples/ent-drive.html" class="nav-link">企业网盘</a></li><li class="dropdown-subitem"><a href="/docs/examples/luck-draw.html" class="nav-link">幸运抽奖</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">关于</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>关于</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/about/repo.html" class="nav-link">开源仓库</a></li><li class="dropdown-subitem"><a href="/docs/about/contact-us.html" class="nav-link">联系我们</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/guide/" aria-current="page" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----> <a href="/docs/en/guide/" class="nav-link">English</a></li></ul></div></div> <a href="https://github.com/Liggin2019/Ligg.EasyWinApp" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">首页</a></div><div class="nav-item"><a href="/docs/guide/" aria-current="page" class="nav-link router-link-exact-active router-link-active">指南</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">示例</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>示例文档</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/examples/ittk.html" class="nav-link">IT工具箱</a></li><li class="dropdown-subitem"><a href="/docs/examples/devtk.html" class="nav-link">开发工具箱</a></li><li class="dropdown-subitem"><a href="/docs/examples/orptk.html" class="nav-link">运维工具箱</a></li><li class="dropdown-subitem"><a href="/docs/examples/ewc.html" class="nav-link">快捷Web客户端</a></li><li class="dropdown-subitem"><a href="/docs/examples/ent-drive.html" class="nav-link">企业网盘</a></li><li class="dropdown-subitem"><a href="/docs/examples/luck-draw.html" class="nav-link">幸运抽奖</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">关于</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>关于</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/about/repo.html" class="nav-link">开源仓库</a></li><li class="dropdown-subitem"><a href="/docs/about/contact-us.html" class="nav-link">联系我们</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/guide/" aria-current="page" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----> <a href="/docs/en/guide/" class="nav-link">English</a></li></ul></div></div> <a href="https://github.com/Liggin2019/Ligg.EasyWinApp" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav> <div class="load-success"><div id="codefund"></div></div> <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>介绍</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/docs/guide/" aria-current="page" class="active sidebar-link">总体介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/guide/#项目结构" class="sidebar-link">项目结构</a></li><li class="sidebar-sub-header"><a href="/docs/guide/#项目依赖" class="sidebar-link">项目依赖</a></li><li class="sidebar-sub-header"><a href="/docs/guide/#运行目录" class="sidebar-link">运行目录</a></li><li class="sidebar-sub-header"><a href="/docs/guide/#程序运行" class="sidebar-link">程序运行</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/guide/#控制台程序运行" class="sidebar-link">控制台程序运行</a></li><li class="sidebar-sub-header"><a href="/docs/guide/#winform程序运行" class="sidebar-link">Winform程序运行</a></li><li class="sidebar-sub-header"><a href="/docs/guide/#注意事项" class="sidebar-link">注意事项</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/guide/#编译和调试" class="sidebar-link">编译和调试</a></li><li class="sidebar-sub-header"><a href="/docs/guide/#集成开发" class="sidebar-link">集成开发</a></li></ul></li><li><a href="/docs/guide/introduction/config-file.html" class="sidebar-link">配置文件</a></li><li><a href="/docs/guide/introduction/formula.html" class="sidebar-link">无码化编程基础</a></li><li><a href="/docs/guide/introduction/shell.html" class="sidebar-link">Ligg Shell编程基础</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>教程-Winform</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/docs/guide/tutorials/winform/overall.html" class="sidebar-link">整体说明</a></li><li><a href="/docs/guide/tutorials/winform/quick-start.html" class="sidebar-link">快速开始</a></li><li><a href="/docs/guide/tutorials/winform/subjects.html" class="sidebar-link">专题</a></li><li><a href="/docs/guide/tutorials/winform/form.html" class="sidebar-link">Form</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>教程-Console</span> <!----></p> <ul class="sidebar-group-items"></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>附录</span> <!----></p> <ul class="sidebar-group-items"></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>其他</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/docs/guide/other/faq.html" class="sidebar-link">常见问题</a></li><li><a href="/docs/guide/other/discuss.html" class="sidebar-link">讨论组</a></li><li><a href="/docs/guide/other/release-notes.html" class="sidebar-link">Release Notes</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="总体介绍"><a href="#总体介绍" class="header-anchor">#</a> 总体介绍</h1> <div class="tip custom-block"><p class="custom-block-title">提示</p> <p>本节内容快速浏览即可，通过教程的练习后，再回来加深理解。</p></div> <h2 id="项目结构"><a href="#项目结构" class="header-anchor">#</a> 项目结构</h2> <img src="/docs/images/introduction/proj-structure.png" width="300px" alt="proj structure"> <h2 id="项目依赖"><a href="#项目依赖" class="header-anchor">#</a> 项目依赖</h2> <img src="/docs/images/introduction/proj-dependency.png" alt="proj denpendency"> <p>如上图所示：</p> <ul><li>Ligg.Ewa.WinformApp和Ligg.Ewa.ConsoleApp是Winform和控制台应用的启动项目; 对应不同的启动参数，进入不同的应用(Application)和UI。一个应用可以同时具有多个Winform和Console的界面。</li> <li>Ligg.Ewa.Winform, Ligg.Ewa.Console项目主要作用是对UI的管理。</li> <li>Ligg.Ewa.Parser为Ligg.Ewa.Winform, Ligg.Ewa.Console共用。框架内置基础功能(如字符、文件处理, 逻辑、数值运算, 数据输入输出、数据格式转换、加密解密、表单字段验证、Windows脚本执行、Python脚本执行等...), 框架通过Ligg.Ewa.Parser项目以Get(), Do(), GetConstant(), Validate()调用Ligg.Infra项目实现。</li> <li>Cblp项目(核心业务逻辑处理)实现Get(), Do(), GetConstant(), Validate()的功能扩展。一个应用对应一个的Cblp项目。</li> <li>OeStdServiceComponent项目(外嵌标准服务组件)通常是通用共享的组件。实现Get(), Do()的功能扩展; 为多个应用共用。</li> <li>启动项目和Cblp项目以及外嵌标准服务项目项目都需要引用Ligg.Ewa.Interface项目。启动项目和Cblp项目之间， 启动项目和OeStdServiceComponent项目之间没有依赖关系，通过Ioc来调用。</li> <li>Cblp和OeStdServiceComponent项目的目标框架可以是.net Framework、.net Standand或.net Core。
详见<a href="#%E9%9B%86%E6%88%90%E5%BC%80%E5%8F%91">集成开发</a>部分及示例。
<br></li></ul> <h2 id="运行目录"><a href="#运行目录" class="header-anchor">#</a> 运行目录</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Root目录，常量表达式: %rootDir%</span>
├── Conf                                    <span class="token comment"># 配置目录, 常量表达式: %configDir%, %cfgDir%</span>
│   │── Apps                                         
│   │   │── App-1                           <span class="token comment"># App配置目录, 常量表达式: %appConfigDir%</span>
│   │   │   │── Share                       <span class="token comment"># App Share 配置目录, 常量表达式: %appShareConfigDir%</span>
│   │   │   <span class="token operator">|</span>                                 or %appShCfgDir%
│   │   │   └── UI                          <span class="token comment"># App UI 配置目录, 常量表达式: %appUiDir%</span>
│   │   │       │── Console                            
│   │   │       │── │── Scenarios           <span class="token comment"># 常量表达式: %appScenariosDir%, %appSnrsDir%</span>
│   │   │       │── │── │── Scenario-1      
│   │   │       │── │── │── Scenario-2      
│   │   │       │── │── └── Scenario-n          
│   │   │       │── Winform                           
│   │   │       │── │── functions           <span class="token comment"># 常量表达式: %appFuntionsDir%, %appFuncsDir%</span>
│   │   │       │── │── │──function-1        
│   │   │       │── │── │──function-2       
│   │   │       │── │── └──function-n       
│   │   │       │── │── views               <span class="token comment"># 常量表达式: %appViewsDir%</span>
│   │   │       │── │── │──view-1           
│   │   │       │── │── │──view-2           
│   │   │       │── │── └──view-n           
│   │   │       │── └── zones               <span class="token comment"># 常量表达式: %appZonesDir%</span>
│   │   │       │── │── │──zone-1           
│   │   │       │── │── │──zone-2           
│   │   │       │── └── └──zone-n           
│   │   │       │── AbbrevAnnexes.xlsx      <span class="token comment"># 缩写文本多语言配置文件</span>
│   │   │       │── ApplicationAnnexes.xlsx <span class="token comment"># 应用的名称、描述多语言配置文件</span>
│   │   │       │── PhraseAnnexes.xlsx      <span class="token comment"># 词组或句子文本多语言配置文件</span>
│   │   │       └── ApplicationSetting.xlsx <span class="token comment"># 应用配置文件</span>
│   │   │── App-2                           <span class="token comment"># 同上</span>
│   │   └── App-n                           <span class="token comment"># 同上</span>
│   │── Cultures                            <span class="token comment"># 多语言配置目录</span>
│   │  │── Images                           <span class="token comment"># 多语言图标配置目录</span>
│   │  └── Cultures.xlsx                    <span class="token comment"># 多语言配置文件</span>
│   │── Global                              <span class="token comment"># 全局配置目录，常量表达式: %globalConfigDir%, </span>
│   │                                         %glbCfgDir%
│   <span class="token operator">|</span>—— OeServiceComponents.xlsx            <span class="token comment"># OeServiceComponents配置文件</span>
│   └── GlobalSetting.xlsx                  <span class="token comment"># 全局配置文件</span>
├── Data                                   <span class="token comment"># 数据目录，常量表达式: %dataDir%</span>
│   │── Apps                                      
│   │   │── App-1                          <span class="token comment"># App数据目录，常量表达式: %appDataDir%</span>
│   │   │── App-2                          <span class="token comment"># 同上</span>
│   │   └── App-n                          <span class="token comment"># 同上</span>
│   └── Global                             <span class="token comment"># 全局数据目录，常量表达式: %appGlobalDataDir%</span>
├── Ini                                    <span class="token comment"># 可以把启动程序的ini文件放在此处，让根目录比较整洁</span>
├── Lib                                    <span class="token comment"># Lib目录，常量: %libDir%; 下放第3方的程序包，</span>
├   │                                        例如嵌入式Python    
│   │── Apps                                      
│   │   │── App-1                          <span class="token comment"># App Lib 目录，常量表达式: %appLibDir%</span>
│   │   │── App-2                          <span class="token comment"># 同上</span>
│   │   └── App-n                          <span class="token comment"># 同上</span>
│   └── Global                             <span class="token comment"># 全局Lib 目录，常量表达式: %appGlobalLibDir%</span>
├── Program                                <span class="token comment"># 本框架相关的程序文件</span>
│   │── Boot.exe                           <span class="token comment"># 引导程序, debug阶段使用            </span>
│   │── Boot-cpp.exe                       <span class="token comment"># 引导程序, release阶段使用                 </span>
│   │── Cblps                                       
│   │   │── App-1                          <span class="token comment"># 下放应用的Cblp编译出来程序文件</span>
│   │   │── App-2                          <span class="token comment"># 下放应用的Cblp编译出来程序文件</span>
│   │   └── App-n                          <span class="token comment"># 下放应用的Cblp编译出来程序文件</span>
│── │── Main                               <span class="token comment"># 下放启动程序项目编译出来程序文件</span>
│   │   │── netcoreapp3.1                           
│   │   │   │── ConsoleApp.exe             <span class="token comment"># 控制台执行文件, 启动程序</span>
│   │   │   │── debug.ini                  <span class="token comment"># 调试时的启动参数文件</span>
│   │   │   └── WinformApp.exe             <span class="token comment"># Winform执行文件, 启动程序</span>
│   │   └── netfxapp4.72                           
│   │   │   │── ConsoleApp.exe             <span class="token comment"># 控制台执行文件, 启动程序</span>
│   │   │   │── debug.ini                  <span class="token comment"># 调试时的启动参数文件</span>
│   │   │   └── WinformApp.exe             <span class="token comment"># Winform执行文件, 启动程序</span>
│── └── OeStdServiceComponents             <span class="token comment"># 下放'外嵌标准服务'项目编译出来程序文件</span>
│       │── OeStdServiceComponent-1               
│       │── OeStdServiceComponent-2               
│       └── OeStdServiceComponent-n       
│── Boot-1.exe                             <span class="token comment"># 具体的引导程序</span>
│── Boot-1.ini                             <span class="token comment"># 具体的引导程序同名的的ini文件，包含启动参数，</span>
│                                            也可放到@rootDir<span class="token punctuation">\</span>ini 目录下
│── Boot-2.exe                                    
│── Boot-2.ini                                   
│── Boot-n.exe                                    
└── Boot-n.ini                                    

</code></pre></div><h2 id="程序运行"><a href="#程序运行" class="header-anchor">#</a> 程序运行</h2> <h3 id="控制台程序运行"><a href="#控制台程序运行" class="header-anchor">#</a> 控制台程序运行</h3> <p>每个Application可以有多个Console的应用窗口, 每个应用窗口就是一个Scenario, 比如IT运维工具箱(OrpTk)有2个Scenario: RunShell、RunPython; OrpTk的控制台应用最少有2个Boot.exe(根据不同的初始化参数, 一个Scenario可能有多个引导程序)。每个Boot.exe对应一个同名的.ini文件。.ini文件的args分3部分, 第1部分是Application级别的参数, 中间以<a href>参数分隔符</a>相隔; 第2部分是Scenario级别的参数, 中间以<a href>参数分隔符</a>相隔; 第3部分是起始语言参数; 前后部分之间以空格相隔。</p> <ul><li><p>起始语言的参数: Culture|LangugageCode<br> <strong>例如</strong>:<br>
--<strong>en-US|en</strong> Culture: US, 英文<br>
--<strong>zh-CN|szh</strong> Culture: 中国, 简体中文<br>
--<strong>zh-CN|czh</strong> Culture: 中国, 繁体中文<br>
--<strong>zh-CN|en</strong> Culture: 中国, 英文<br></p> <div class="tip custom-block"><p class="custom-block-title">备注</p> <p>在配置文件GlobalSetting.*, ApplicationSetting.* 分别设置了起始语言, 优先级是: 起始语言的参数&gt;ApplicationSetting&gt;GlobalSetting, 详见 <a href>教程-Console-多语言支持</a></p></div></li> <li><p>Application级别的参数: appCode^startPassword<br> <strong>说明</strong>:<br>
--<strong>appCode</strong>: Application的编码, 程序运行以此为关联。<br>
--<strong>startPassword</strong>: Application的起始密码, 如果在ApplicationSetting.*配置文件里设置了需要起始密码, 如果启动参数里带密码文本, 系统则进行隐式验证, 否则会弹出对话框, 进行显式验证。详见<a href>教程-Console:起始密码示例</a><br></p></li> <li><p>Scenario级别的参数: scenarioLocation^formTitle^initParams<br> <strong>说明</strong>:<br>
--<strong>scenarioLocation</strong>: 起始ScenarioLocation的位置, 只支持相对路径(第一个''可以省略), 父路径是<a href>常量</a>%appScenariosDir%。<br>
--<strong>formTitle</strong>: 控制台窗口的Text, 在UI的配置文件里也会设置formTitle, 如果此处为empty, 以UI的配置文件的为准。<br>
--<strong>initParams</strong>: 初始化参数, <a href>Larray</a>格式。<br> <br> <strong><a href>以下是2个示例</a></strong>(1个Scenario对应2个Boot.exe): <br></p> <ul><li>通过RunPython实现一个加法<br>
修改引导程序Boot.exe为OrpTk-Console-PythonAdd.exe, 相应的.ini文件OrpTk-Console-PythonAdd.ini内容如下</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>setting<span class="token punctuation">]</span>
<span class="token assign-left variable">path</span><span class="token operator">=</span>Program<span class="token punctuation">\</span>Main<span class="token punctuation">\</span>netFxApp4.72<span class="token punctuation">\</span>ConsoleApp.exe
<span class="token assign-left variable">args</span><span class="token operator">=</span>OrpTk <span class="token punctuation">\</span>Basic<span class="token punctuation">\</span>RunPython^it-is-run-python-example1^%AppData%<span class="token punctuation">\</span>py<span class="token punctuation">\</span>calc-add.py,1,2
</code></pre></div><ul><li>同理, 通过RunPython实现一个减法<br>
修改引导程序Boot.exe为OrpTk-Console-PythonMinus.exe, 相应的.ini文件OrpTk-Console-PythonMinus.ini如下</li></ul></li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>setting<span class="token punctuation">]</span>
<span class="token assign-left variable">path</span><span class="token operator">=</span>Program<span class="token punctuation">\</span>Main<span class="token punctuation">\</span>netFxApp4.72<span class="token punctuation">\</span>ConsoleApp.exe
<span class="token assign-left variable">args</span><span class="token operator">=</span>OrpTk Basic<span class="token punctuation">\</span>RunPython^it-is-run-python-example1^%AppData%<span class="token punctuation">\</span>py<span class="token punctuation">\</span>calc-minus.py,2,1 zh-CN<span class="token operator">|</span>szh
</code></pre></div><p><strong>示例说明</strong>: <br>
--<strong>参数分隔符</strong>: '^' <br>
--<strong>appCode</strong>: OrpTk<br>
--<strong>无startPassword</strong><br>
--<strong>scenarioLocation</strong>: \Conf\Apps\OrpTk\UI\Console\Basic\RunPython\ <br>
--<strong>formTitle</strong>: it-is-run-python-example1<br>
--<strong>initParams</strong>: '\Data\Apps\OrpTk\py\calc-add.py','1','2'<br>
--<strong>起始语言</strong>: 中国-简体中文</p> <p><strong>运行过程</strong>: 系统运行引导程序, 然后运行启动程序Program\Main\netFxApp4.72\ConsoleApp.exe, 通过scenarioLocation找到Scenario RunPython的UI<a href>配置文件</a>, 传入参数, 运行并输出。<br></p> <h3 id="winform程序运行"><a href="#winform程序运行" class="header-anchor">#</a> Winform程序运行</h3> <p>每个Application可以有多个Winform的启动Form, 比如OrpTk有4个 <a href>不同类型的Form</a>分别是: 管理员主界面(Function Form)、用户主界面(Function Form)、巡检工具Svi界面(Single View Interface, Svi Form)、备份作业工具Szi界面(Single Zone Interface, SziForm), OrpTk的Winform应用最少有4个Boot.exe(根据不同的初始化参数, 一个Form可能有多个引导程序)。每个Boot.exe对应一个同名的.ini文件。.ini文件的args分3部分, 第1部分是Application级别的参数, 中间以<a href>参数分隔符</a>相隔; 第2部分是Form级别的参数, 中间以<a href>参数分隔符</a>相隔; 第3部分是起始语言参数; 前后部分之间以空格相隔。</p> <ul><li><p>起始语言的参数: 同上, 详见 <a href>教程-Winform-多语言支持</a><br></p></li> <li><p>Application级别的参数: appCode^startPassword, 与控制台类似, 详见 <a href>教程-Winform:起始密码示例</a><br></p></li> <li><p>Form级别的参数: 根据Form类型有所不同<br> <strong>说明</strong>:<br>
--<strong>formTitle</strong>: Form窗口的Text, 在UI的配置文件里也会设置formTitle, 如果此处为empty, 以UI的配置文件的为准。<br>
--<strong>initParams</strong>: 初始化参数, <a href>Larray</a>格式。<br> <br>
--<strong>Szi/ Svi的Form级别的参数</strong>: formType^FormLocation^formTitle^initParams<br>
----formType: Szi 或Svi, 如果为Empty则为Szi<br>
----FormLocation起始Form的位置, 只支持相对路径(第一个''可以省略), Szi的父路径是<a href>常量</a>: %appZonesDir%, Svi的父路径是<a href>常量</a>: %appViewsDir%,。<br></p> <p>--<strong>Mvi的Form级别的参数</strong>: formType^FormLocation|StartView^initParams<br>
----formType: Mvi<br>
----FormLocation: FormLocation是单层的, 只支持相对路径(第一个''可以省略), 父路径是<a href>常量</a>: %appFunctionsDir%,  详见<a href>教程-Winform-Mvi</a><br>
----StartView: 起始View, 每个FuctionForm的UI配置里有设置StartView, 如果此处为empty, 以UI的配置文件的为准。<br> <br> <strong>以下是4个示例</strong>: <br></p> <ul><li>OrpTk管理员主界面<br>
修改引导程序Boot.exe为OrpTk-Winform-Func-Admin.exe, 相应的.ini文件OrpTk-Winform-Func-Admin.ini内容如下</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>setting<span class="token punctuation">]</span>
<span class="token assign-left variable">path</span><span class="token operator">=</span>Program<span class="token punctuation">\</span>Main<span class="token punctuation">\</span>netFxApp4.72<span class="token punctuation">\</span>WinformApp.exe
<span class="token assign-left variable">args</span><span class="token operator">=</span>OrpTk Mvi^Admin<span class="token operator">|</span>OrpMgr
</code></pre></div><p><strong>说明</strong>: 没有startPassword, 没有formTitle, 没有初始化参数; Form类型是Mvi, Admin是管理员主界面的FormLocation, OrpMgr表示首先进入运维管理View(缺省是SysMgr-系统管理View)。</p> <ul><li>OrpTk巡检工具Svi界面<br>
修改引导程序Boot.exe为OrpTk-Winform-Svi-Insp.exe, 相应的.ini文件OrpTk-Winform-Svi-Insp.ini内容如下</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>setting<span class="token punctuation">]</span>
<span class="token assign-left variable">path</span><span class="token operator">=</span>Program<span class="token punctuation">\</span>Main<span class="token punctuation">\</span>netFxApp4.72<span class="token punctuation">\</span>WinformApp.exe
<span class="token assign-left variable">args</span><span class="token operator">=</span>OrpTk Svi^<span class="token punctuation">\</span>Admin<span class="token punctuation">\</span>Insp^Inspection-Server^server
</code></pre></div><p><strong>说明</strong>: 没有startPassword; Form类型是Svi; \Admin\Insp是Form的相对路径; formTitle是Inspection-Server; server是初始化参数, 表示Server的巡检, 配置的UI会根据传入参数把Server的巡检界面显示在最前面。</p> <ul><li>OrpTk备份作业工具Szi界面-备份Db<br>
修改引导程序Boot.exe为OrpTk-Winform-Szi-BakWorkerForDb.exe, 相应的.ini文件OrpTk-Winform-Szi-BakWorkerForDb.ini内容如下</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>setting<span class="token punctuation">]</span>
<span class="token assign-left variable">path</span><span class="token operator">=</span>Program<span class="token punctuation">\</span>Main<span class="token punctuation">\</span>netFxApp4.72<span class="token punctuation">\</span>WinformApp.exe
<span class="token assign-left variable">args</span><span class="token operator">=</span>OrpTk Szi^Common<span class="token punctuation">\</span>BakWorker^db-backup^db,2days,1:00
</code></pre></div><p><strong>说明</strong>: 该工具通过配置已集成备份服务器上所有Db和备份磁盘柜相关文件功能。 Form类型是Szi; \Common\BakWorker是Form的相对路径; formTitle: db-backup, Form的Text显示db-backup, 与文件备份有个区分; db,2days,1:00是初始化参数, 表示备份Db,每隔2天, 每天1:00开始作业。</p> <ul><li>OrpTk备份作业工具Szi界面-备份文件<br>
修改引导程序Boot.exe为OrpTk-Winform-Szi-BakWorkerForFile.exe, 相应的.ini文件OrpTk-Winform-Szi-BakWorkerForFile.ini内容如下</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>setting<span class="token punctuation">]</span>
<span class="token assign-left variable">path</span><span class="token operator">=</span>Program<span class="token punctuation">\</span>Main<span class="token punctuation">\</span>netFxApp4.72<span class="token punctuation">\</span>WinformApp.exe
<span class="token assign-left variable">args</span><span class="token operator">=</span>OrpTk Szi^<span class="token punctuation">\</span>Common<span class="token punctuation">\</span>BakWorker^file-backup^files,3days,2:00
</code></pre></div><p><strong>说明</strong>: 该工具通过配置已集成备份服务器上所有Db和备份磁盘柜相关文件功能;  Form类型是Szi, \Common\BakWorker是Form的相对路径; formTitle: file-backup, Form的Text显示file-backup,与db备份有个区分; file,3days,2:00是初始化参数, 表示备份file,每隔3天, 每天2:00开始作业。</p></li></ul> <p><strong>运行过程</strong>: 系统运行引导程序, 然后运行启动程序Program\Main\netFxApp4.72\WinformApp.exe, 通过参数找到Form的UI<a href>配置文件</a>, 传入参数, 显示Form。见<a href>教程示例</a><br></p> <h3 id="注意事项"><a href="#注意事项" class="header-anchor">#</a> 注意事项</h3> <div class="tip custom-block"><p class="custom-block-title">注意事项</p> <ul><li>引导程序Boot-x.exe必须放到根目录。引导程序可采用Boot.exe, 源码及下载见 <a href>博客园: C#通过System.Diagnostics.Process扩展实现引导程序</a>; 也可采用Boot-cpp.exe, 源码及使用方法详见 <a href="https://www.gitee.com/Liggin2019/Ligg.SeqExec" target="_blank" rel="noopener noreferrer">Gitee: Liggin2019/Ligg.SeqExec<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li> <li>Boot-x.ini可以放到根目录, 也可以统一放到根目录下的\ini下, 这样根目录比较整洁。</li> <li>Conf下各文件夹名称和位置不能改变。</li> <li>Data、Lib、Cblps的文件夹可以在配置文件ApplicationSetting.*里设置, 如在配置文件采用相对路径则在缺省位置。</li> <li>OeStdServiceComponents文件夹在配置文件OeStdServiceComponents.*里设置, 如在配置文件采用相对路径则在缺省位置。</li> <li>启动程序WinformApp.exe、ConsoleApp.exe必须放到根目录的第3层子目录下如: \Program\Main\netcoreapp3.1, 系统SetCurrentDirectory的方式如下:</li></ul> <div class="language-csharp extra-class"><pre class="language-csharp"><code> <span class="token class-name"><span class="token keyword">var</span></span> executableDir <span class="token operator">=</span> 
 Path<span class="token punctuation">.</span><span class="token function">GetDirectoryName</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms<span class="token punctuation">.</span>Application<span class="token punctuation">.</span>ExecutablePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
 _startUpDir <span class="token operator">=</span> Directory<span class="token punctuation">.</span><span class="token function">GetParent</span><span class="token punctuation">(</span>executableDir<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 _startUpDir <span class="token operator">=</span> Directory<span class="token punctuation">.</span><span class="token function">GetParent</span><span class="token punctuation">(</span>_startUpDir<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 _startUpDir <span class="token operator">=</span> Directory<span class="token punctuation">.</span><span class="token function">GetParent</span><span class="token punctuation">(</span>_startUpDir<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 Directory<span class="token punctuation">.</span><span class="token function">SetCurrentDirectory</span><span class="token punctuation">(</span>_startUpDir<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <h2 id="编译和调试"><a href="#编译和调试" class="header-anchor">#</a> 编译和调试</h2> <ul><li><p>Cblp、OeStdServiceComponent项目都需要引用Ligg.Ewa.Interface项目。启动项目和Ligg.Ewa.Cblp项目之间， 启动项目和OeStdServiceComponent项目之间没有依赖关系，通过Ioc来调用; Vs2019是可以进去Debug的。详见 <a href>博客园: C# 通过Ioc和反射的实现依赖注入(DI)和面向切面编程(AOP)</a></p></li> <li><p>Cblp、OeStdServiceComponent项目的标准服务都必须继承Ligg.Ewa.Interface的接口OeStdService, Cblp的Service不用继承。</p></li> <li><p>Cblp和OeStdServiceComponent项目的目标框架可以是.net Framework、.net Standand或.net Core。</p></li> <li><p>开发时的目录结构和启动项目Ligg.Ewa.WinformApp和Ligg.Ewa.ConsoleApp的Output Path, 设置如下, 比较方便:
<img src="/docs/images/introduction/proj-debug.png" alt="proj debug"></p></li> <li><p>在启动文件WinformApp.exe、ConsoleApp.exe并列, 有一个debug.ini文件, 可以方便调试不同的UI配置和初始化参数, 这样不用频繁更改Visual Studio的 Command line arguments。 在发行阶段要把此文件删除或者设置debug=false。这个参数会传递给程序, 决定程序的某些功能, 如读取配置文件的格式的顺序。内容示例如下:</p></li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>setting<span class="token punctuation">]</span>
<span class="token assign-left variable">debug</span><span class="token operator">=</span>true
<span class="token assign-left variable">path</span><span class="token operator">=</span>Program<span class="token punctuation">\</span>Main<span class="token punctuation">\</span>netFxApp4.72<span class="token punctuation">\</span>WinformApp.exe
//args<span class="token operator">=</span>Demo Mvi^Function20<span class="token operator">|</span>NoAuth zh-CN<span class="token operator">|</span>szh
//args<span class="token operator">=</span>Demo Svi^demo<span class="token punctuation">\</span>SendLocalEmail2
<span class="token assign-left variable">args</span><span class="token operator">=</span>Demo Szi^Demo<span class="token punctuation">\</span>ChooseFile
</code></pre></div><h2 id="集成开发"><a href="#集成开发" class="header-anchor">#</a> 集成开发</h2> <p>可以从下面几个方面进行集成开发</p> <ul><li><p>Winform控件的扩展</p></li> <li><p>Cblp、OeStdServiceComponent的开发</p></li> <li><p>当只采用上述的集成开发方式, 采用框架提供的\release\下的Release版本作为主运行程序即可。</p></li> <li><p>当采用开源版本做集成开发, 请保留&quot;Powered by Liggin2019&quot;标识, 这是本框架唯一的额外版权要求。</p></li> <li><p>当然你也可以魔改本框架, 本框架采用MIT开源协议, 请遵循该协议即可。注意事项如下:</p> <ul><li>发行版本的try/catch的处理
<br>在\src\Ligg.Ewa.WinForm\Forms\FunctionForm.cs, \src\Ligg.Ewa.Console\ScenarioForm.cs的如下所示的注释处, 往上删除相应try/catch<br> <blockquote><p>//--Please delete all try/catch before Release in front of this point, after full testing!!!//</p></blockquote></li> <li>发行版本的错误日志的处理
<br>在\src\Ligg.Ewa.WinForm\Forms\FunctionForm.cs, \src\Ligg.Ewa.Console\ScenarioForm.cs的如下所示的注释处, 自行添加错误日志<br> <blockquote><p>//--write into error log</p></blockquote></li> <li>发行版本的事务日志的处理
<br>在\src\Ligg.Ewa.WinForm\Forms\FunctionForm.cs, \src\Ligg.Ewa.Console\ScenarioForm.cs的如下所示的注释处, 自行添加事务日志<br> <blockquote><p>//--write into readTextlog<br>
//--write into transaction log</p></blockquote></li></ul></li></ul> <hr> <div class="warning custom-block"><p class="custom-block-title">注意</p> <ul><li>从3.0版本开始Cblp已不支持COM组件</li></ul></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/Liggin2019/Ligg.EasyWinApp/docs/edit/master/docs/guide/README.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/docs/guide/introduction/config-file.html">
          配置文件
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/docs/assets/js/app.b9721d5c.js" defer></script><script src="/docs/assets/js/36.b32497a7.js" defer></script>
  </body>
</html>
